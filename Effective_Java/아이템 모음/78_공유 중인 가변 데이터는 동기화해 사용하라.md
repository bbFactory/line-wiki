# 11장. 동시성(p413~448)

> 이번 장에는 동시성 프로그램을 명확하고 정확하게 만들고 문서화를 잘 하는 데 도움이 되는 조언들을 담았다.

## 아이템 78. 공유 중인 가변 데이터는 동기화해 사용하라(p414~419)

synchronized 키워드는 해당 메서드나 블록을 한번에 한 스레드씩 수행하도록 보장한다. 이 키워드로 동기화 작업을 제대로 수행하면 어떤 메서드에서도 객체는 일관된 상태를 유지할 것이다. 

**동기화는 배타적 실행뿐 아니라 스레드 사이의 안정적인 통신에 꼭 필요하다.** 

Thread.stop 메서드는 안전하지 않아 이미 오래전에 사용 자제(deprecated) API로 지정되었다(이 메서드를 사용하면 데이터가 훼손될 수 있다). 그러니 **Thread.stop은 사용하지 말자!** 

쓰기와 읽기 모두가 **동기화되지 않으면 동작을 보장하지 않는다.** 어떤 기기에서는 둘 중 하나만 동기화해도 동작하는 듯 보이지만, 겉모습에 속아서는 안 된다. 

**가변 데이터는 단일 스레드에서만 쓰도록 하자.** 또한, 사용하려는 프레임워크와 라이브러리를 깊이 이해하는 것도 중요하다. 외부 코드가 인지하지 못한 스레드를 수행하는 복병으로 작용하는 경우도 있기 때문이다.

## 마무리

- 여러 스레드가 가변 데이터를 공유한다면 그 데이터를 읽고 쓰는 동작은 반드시 동기화해야 한다. 동기화하지 않으면 한 스레드가 수행한 변경을 다른 스레드가 보지 못할 수도 있다. 공유되는 가변 데이터를 동기화하는 데 실패하면 응답 불가 상태에 빠지거나 안전 실패로 이어질 수 있다.


