# 7장. 람다와 스트림(p253~296)

> 자바 8에서 **함수형 인터페이스, 람다, 메서드 참조**가 추가되면서 **함수 객체**를 더 쉽게 만들 수 있게 되었다. 이와 함께 **스트림 API**까지 추가되어 데이터 원소의 시퀀스 처리를 라이브러리 차원에서 지원하기 시작했다. 
>
> 이번 장에서는 이 기능들을 효과적으로 사용하는 방법을 알아보려 한다.

## 아이템 43. 람다보다는 메서드 참조를 사용하라(p259~262)

익명클래스보다 짧은 람다보다 더 짧은 코드를 작성하려면 **메서드 참조**(method reference)를 사용하면 된다.

다음 merge 메서드에서 메서드 참조를 살펴보자. merge 메서드는 자바 8 때 Map에 추가되었다.

```java
map.merge(key, 1, (count, increment) -> count + increment);
```

merge 메서드는 키, 값, 함수를 인수로 받는다. 만약 전달된 키가 맵 안에 없다면 주어진 (키, 값) 쌍을 그대로 저장한다. 만약 키가 있다면 세 번째 인수로 받은 함수를 현재 값과 주어진 값에 적용하여 나온 결과를 현재 값으로 덮어쓴다. 이 방식을 잘 사용하면 하나의 map에서 키와 각 키의 인스턴스의 개수를 값으로 매핑하여 저장할 수 있다.

생각해보면 위의 람다는 간단한 함수(정수들의 덧셈)를 구현하고 있다. 이런 간단한 기능을 구현하는 함수가 어디엔가 있기 마련이다. Integer의 정적 메서드 sum 가 바로 그러하며, 메서드 참조를 활용하여 위의 코드를 더욱 간단히 할 수 있다.

```java
map.merge(key, 1, Integer::sum);
```

한편, 람다로 할 수 없는 일은 대개 메서드 참조로도 할 수 없다.

## 메서드 참조 유형

메서드 참조 유형은 크게 다섯 가지로 나뉜다. 그중 정적 메서드를 가리키는 메서드 참조가 가장 흔하다. 아래는 메서드 참조 유형을 정리한 표다.

| **메서드 참조 유형** | **예**                 | **같은 기능을 하는 람다**                               |
| -------------------- | ---------------------- | ------------------------------------------------------- |
| 정적                 | Integer::parseInt      | str -> Integer.parseInt(str)                            |
| 한정적 (인스턴스)    | Instant.now()::isAfter | Instant then = Instant.now();<br />t -> then.isAfter(t) |
| 비한정적 (인스턴스)  | String::toLowerCase    | str -> str.toLowerCase()                                |
| 클래스 생성자        | TreeMap<K,V>::new      | () -> new TreeMap<K,V>()                                |
| 배열 생성자          | int[]::new             | len -> new int[len]                                     |

## 마무리

- **메서드 참조 쪽이 짧고 명확한 경우에 메서드 참조를 쓰고, 그렇지 않은 경우 람다를 사용하라.**


