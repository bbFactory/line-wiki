# 9장. 일반적인 프로그래밍 원칙(p343~384)

> 이번 장에서는 자바 언어의 핵심 요소라고 할 수 있는 다음 내용들을 다룬다.
>
> - 지역변수
> - 제어구조
> - 라이브러리
> - 데이터 타입 
> - 리플렉션과(언어 경계를 넘나드는 기능) 
> - 네이티브 메서드
> - 최적화와 명명 규칙

## 아이템 64. 객체는 인터페이스를 사용해 참조하라(p368~370)

## 인터페이스 참조의 이점

**적합한 인터페이스만 있다면 매개변수뿐 아니라 반환값, 변수, 필드를 전부 인터페이스 타입으로 선언하는 것이 좋다.** 객체의 실제 클래스를 사용하는 경우는 '오직' 생성자로 객체를 생성할 때뿐이라고 생각하자. 다음의 좋은 예와 좋지 않은 예를 살펴보자.

```java
// 좋은 예. 인터페이스를 타입으로 사용했다.
Set <Son> sonSet = new LinkedHashSet<>();
```

```java
// 나쁜 예. 클래스를 타입으로 사용했다!
LinkedHashSet<Son> sonSet = new LinkedHashSeto();
```

좋은 예가 왜 좋은 걸까? 나중에 구현 클래스를 교체할 경우, 교체할 자리에 새 클래스의 생성자(혹은 다른 정적 팩터리)를 호출해주기만 하면 되기 때문이다. 좋은 예는 다음 예시로 쉽게 변경할 수 있다.

```java
Set<Son> sonSet = new HashSet<>();
```

## 인터페이스 참조를 할 수 없는 경우

만약, **적합한 인터페이스가 없다면 클래스를 참조하도록 하자.** 특히 String과 BigInteger 같은 값 클래스의 경우가 그러하다. 이들은 애초에 final일 경우가 많고, 이에 상응하는 인터페이스를 가지기 어렵다. 따라서 값 클래스라면 매개변수, 변수, 필드, 반환 타입으로 사용해도 무방하다. 

클래스 기반의 프레임워크가 제공하는 객체들 또한 적합한 인터페이스를 가지기 어렵다. 다만 이런 경우라면, 특정 구현 클래스보다는 (보통은 추상 클래스인) 기반 클래스를 사용해 참조하는 게 좋다. 예를 들어 java.io 패키지의 클래스들(OutputStream 등)이 있다.

마지막으로, 인터페이스에는 없는 특별한 메서드를 제공하는 클래스들은 인터페이스를 가지기 어렵다. 예를 들어 PriorityQueue 클래스는 Queue 인터페이스에는 없는 comparator 메서드를 제공한다. 다만 인터페이스에 없는 메서드를 꼭 사용해야 하는 경우에만 클래스 타입을 직접 사용하도록 하자.

